pipeline {
agent any
    tools { 
        maven 'Maven'
        jdk 'jdk' 
    }
  stages {
    stage('Source') { // Get code
      steps {
        // get code from our Git repository
        git 'https://github.com/saurabh12j/DevOps-Demo-WebApp.git'
      }
    }
      
      stage ('SonarQube Analysis'){
steps{
withSonarQubeEnv('SonarQube5.3') {
sh 'mvn org.sonarsource.scanner.maven:sonar-maven-plugin:3.2:sonar'
}
}
}

    stage('Build') { // Compile and do unit testing

      steps {
        // run Gradle to execute compile and unit testing
        sh 'mvn -B -DskipTests clean package'
      }
    }
  }
}
